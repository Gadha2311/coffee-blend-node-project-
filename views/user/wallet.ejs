<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Responsive Bootstrap4 Shop Template, Created by Imran Hossain from https://imransdesign.com/">

	<!-- title -->
	<title>Coffee Blend</title>

	<!-- favicon -->
	<!-- <link rel="shortcut icon" type="image/png" href=""> -->


	<!-- google font -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
	<!-- fontawesome -->
	<link rel="stylesheet" href="/user_assets/css/all.min.css">
	<!-- bootstrap -->
	<link rel="stylesheet" href="/user_assets/bootstrap/css/bootstrap.min.css">
	<!-- owl carousel -->
	<link rel="stylesheet" href="/user_assets/css/owl.carousel.css">
	<!-- magnific popup -->
	<link rel="stylesheet" href="/user_assets/css/magnific-popup.css">
	<!-- animate css -->
	<link rel="stylesheet" href="/user_assets/css/animate.css">
	<!-- mean menu css -->
	<link rel="stylesheet" href="/user_assets/css/meanmenu.min.css">
	<!-- main style -->
	<link rel="stylesheet" href="/user_assets/css/main.css">
	<!-- responsive -->
	<link rel="stylesheet" href="/user_assets/css/responsive.css">
    <style>
        .passwordForm {
      display: none;
      margin-top: 12vh;
    }

.edit {
    margin-right: 20px;
}


.section-container {
    background-color: #ffffff;
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 10px;
}
.passwordForm{
  margin-top: 12vh;
}
    </style>

</head>
<body>
	
	<!--PreLoader-->
    <!-- <div class="loader">
        <div class="loader-inner">
            <div class="circle"></div>
        </div>
    </div> -->
    <!--PreLoader Ends-->
	
	<!-- header -->
	<div class="top-header-area" id="sticker">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-sm-12 text-center">
					<div class="main-menu-wrap">
						<!-- <a class="navbar-brand" href="index.html">Coffee<small>Blend</small></a> -->
						<!-- logo -->
						<div class="site-logo">
							<a href="index.html">
								<img src="" alt="">
							</a>
						</div>
						<!-- logo -->

						<!-- menu start -->
						<nav class="main-menu" >
							<ul>
								<li class="current-list-item"><a href="/">Home</a></li>
								<li><a href="/shop">shop</a></li>
								
								<li><a href="contact.html">Contact</a></li>
								<li>
								<a href="#">category</a>
								<ul class="sub-menu">
									<li class="nav-item">
									<% categories.filter(category => category.status !== false).forEach(category => { %>
									<li> <!-- Wrap each sub-category item in its own list item -->
									<a class="dropdown-item" href="/shop?category=<%= category._id %>">
										<%= category.name %>
									</a>
									</li>
									<% }); %>
									</li>
								</ul>
								</li>		
								<li>
									<div class="header-icons">
										<a class="shopping-cart" href="/cartpage"><i class="fas fa-shopping-cart"></i></a>
										<a class="mobile-hide search-bar-icon" href="#"><i class="fas fa-heart"></i></a>
                                        <a class="mobile-hide search-bar-icon" href="/profile"><i class="fas fa-user"></i></a>
										<div class="search-bar">
											<form action="/searchProducts"method='post'>
											  <input name="searchProducts" type="text" class="search-input" placeholder="Search...">
											  <button class="search-button"><img src="/user_assets/img/search-50.png" style="height: 20px;"></button>
											  </form>
											</div>
									</div>
								</li>
							</ul>
						
						<!-- menu end -->
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end header -->

	<div style="background-color: black; height: 150px;"></div>
	
	<div class="hero">
        <div class="container">
          <div class="row justify-content-between">
            <div class="col-lg-5">
              <div class="intro-excerpt">
                <h1 class="heroo">Wallet</h1>
               
              </div>
              <form id="orderForm" style="font-family: 'Arial', sans-serif;">
                <input type="number" id="Amount" name="Amount" style="border: 1px solid #ccc; padding: 8px; font-weight: bold; margin-right: 10px;">
                <button onclick="RazorpayWallet(event)" style="background-color: #fff; color: #333; border: 1px solid #ccc; padding: 10px; font-weight: bold; cursor: pointer;">Add To Wallet</button>
            </form>
            
            </div>
            <div class="col-lg-7">
              <!-- ... (additional content if needed) ... -->
            </div>
          </div>
        </div>
      </div>
      <!-- End Hero Section -->
    
      
        <div style="text-align: center;">
          <section class="user-details-section mt-4 section-container">
            <div style="display: inline-block; text-align: center; margin-left: 32%;">
              <h1>Wallet&nbsp;:&nbsp;</h4>
                <h1 style="display: inline-block; font-size: 50px;text-align: center;"><span>Rs.&nbsp;</span><span style="font-weight: bolder;"><%= userWallet %></span></h1>
            </div>
            
     
          </section>
        </div>
    
          <section  class="user-details-section mt-4 section-container">
              <h1 style="text-align: center;">Wallet history&nbsp;</h1>
                <table class="responsive-table">
                  <thead>
                    <tr>
                      <th style="text-align: center;">Date</th>
                      <th>Reason</th>
                      <th>Type</th>
                      <th>Amount</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% usertransactions.forEach(function(transaction) { %>
                      <tr>
                        <td style="text-align: center;"><%= transaction.date.toLocaleString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: 'numeric', minute: 'numeric', hour12: true }) %></td>
                        <td class="<%= transaction.type === 'Credited' ? 'credited' : 'debited' %>"><%= transaction.reason %></td>
                        <td class="<%= transaction.type === 'Credited' ? 'credited' : 'debited' %>"><%= transaction.type %></td>
                        <td class="<%= transaction.type === 'Credited' ? 'credited' : 'debited' %>"><%= transaction.type === 'Credited' ? '+' : '-' %><%= transaction.amount %></td>
                      </tr>
                    <% }); %>
                  </tbody>
                </table>
            
          </section>
      

    	<!-- footer -->
	<div class="footer-area">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-md-6">
					<div class="footer-box about-widget">
						<h2 class="widget-title">About us</h2>
						<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.</p>
					</div>
				</div>
				<div class="col-lg-3 col-md-6">
					<div class="footer-box get-in-touch">
						<h2 class="widget-title">Get in Touch</h2>
						<ul>
							<li>203 Fake St. Mountain View, San Francisco, California, USA.</li>
							<li>support@coffeeblenf.com</li>
							<li>+00 111 222 3333</li>
						</ul>
					</div>
				</div>
				<div class="col-lg-3 col-md-6">
					<div class="footer-box pages">
						<h2 class="widget-title">Pages</h2>
						<ul>
							<li><a href="index.html">Home</a></li>
							<li><a href="about.html">Menu</a></li>
							<li><a href="services.html">Shop</a></li>
							<li><a href="contact.html">Contact</a></li>
						</ul>
					</div>
				</div>
				<div class="col-lg-3 col-md-6">
					<div class="footer-box subscribe">
						<h2 class="widget-title">Subscribe</h2>
						<p>Subscribe to our mailing list to get the latest updates.</p>
						<form action="index.html">
							<input type="email" placeholder="Email">
							<button type="submit"><i class="fas fa-paper-plane"></i></button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end footer -->
	
	<!-- copyright -->
	<div class="copyright">
		<div class="container">
			<div class="row">
				<!-- <div class="col-lg-6 col-md-12">
					<p>Copyrights &copy; 2019 - <a href="https://imransdesign.com/">Imran Hossain</a>,  All Rights Reserved.<br>
						Distributed By - <a href="https://themewagon.com/">Themewagon</a>
					</p>
				</div> -->
				<div class="col-lg-6 text-right col-md-12">
					<div class="social-icons">
						<ul>
							<li><a href="#" target="_blank"><i class="fab fa-facebook-f"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-twitter"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-instagram"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-linkedin"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-dribbble"></i></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end copyright -->


	<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <script>
       async function  RazorpayWallet()
  {
    event.preventDefault()
    console.log("ivide function");
    let amountToPay=document.getElementById('Amount').value
    console.log(amountToPay);
    if(!amountToPay){
      Swal.fire({
    text: 'please enter an amount',
    icon: 'error',
  confirmButtonText: 'OK',
  customClass: {
    title: 'text-danger',
    popup: 'swal2-popup-custom',
    confirmButton: 'btn btn-danger'
  },
  showCancelButton: false,
  showCloseButton: true,
  showLoaderOnConfirm: false,
  timer: 3000 
});

    }
    else {
console.log("upi total","ppppppp");

var options = {
"key": 'rzp_test_v8PCaJHB5kU6bu', // Enter the Key ID generated from the Dashboard
"amount":  amountToPay*100, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
"currency": "INR",
"name": "Coffee Blend",
"description": "Test Transaction",
"image": "coffee blend",
"order_id": orderId, //This is a sample Order ID. Pass the id obtained in the response of Step 1
"handler": function (response){
alert(response.razorpay_payment_id);
document.getElementById('orderForm').action = '/walletTopup';
document.getElementById('orderForm').method = 'post'; // Replace with your actual URL

// Submit the form
document.getElementById('orderForm').submit();

},


"theme": {
"color": "orange"
},
};
var rzp1 = new Razorpay(options);
rzp1.on('payment.failed', function (response){
        alert(response.error.code);
        alert(response.error.description);
        alert(response.error.source);
        alert(response.error.step);
        alert(response.error.reason);
        alert(response.error.metadata.order_id);
        alert(response.error.metadata.payment_id);
});
    rzp1.open();


    e.preventDefault();


                var orderId ;
$(document).ready(function(){
    var settings = {
  "url": "/walletcreate/orderId",
  "method": "POST",
  "timeout": 0,
  "headers": {
    "Content-Type": "application/json"
  },
  "data": JSON.stringify({
    "amount": amountToPay*100
  }),
};


$.ajax(settings).done(function (response) {

  orderId=response.orderId;
  console.log(orderId);
  $("button").show();
});
});

            }
    
    }
    
      </script>
	
	<!-- jquery -->
	<script src="/user_assets/js/jquery-1.11.3.min.js"></script>
	<!-- bootstrap -->
	<script src="/user_assets/bootstrap/js/bootstrap.min.js"></script>
	<!-- count down -->
	<script src="/user_assets/js/jquery.countdown.js"></script>
	<!-- isotope -->
	<script src="/user_assets/js/jquery.isotope-3.0.6.min.js"></script>
	<!-- waypoints -->
	<script src="/user_assets/js/waypoints.js"></script>
	<!-- owl carousel -->
	<script src="/user_assets/js/owl.carousel.min.js"></script>
	<!-- magnific popup -->
	<script src="/user_assets/js/jquery.magnific-popup.min.js"></script>
	<!-- mean menu -->
	<script src="/user_assets/js/jquery.meanmenu.min.js"></script>
	<!-- sticker js -->
	<script src="/user_assets/js/sticker.js"></script>
	<!-- main js -->
	<script src="/user_assets/js/main.js"></script>

</body>
</html>